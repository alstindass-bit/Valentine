<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Stuti ğŸ’–</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    text-align: center;
    background: linear-gradient(135deg, #ff5f6d, #ffc371);
  }

  h1 {
    color: #fff;
    font-size: 2.2rem;
    margin: 20px;
    text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
  }

  #button-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
    align-items: center;
    margin-top: 30px;
  }

  button {
    font-size: 1.3rem;
    padding: 15px 30px;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    transition: all 0.2s ease;
  }

  button:hover {
    transform: scale(1.1);
  }

  #yes {
    background-color: #ff4d6d;
    color: white;
  }

  #no {
    background-color: #6c757d;
    color: white;
  }

  .toast {
    position: absolute;
    background-color: rgba(255,255,255,0.95);
    color: #333;
    padding: 8px 12px;
    border-radius: 12px;
    font-size: 0.9rem;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    opacity: 0;
    transition: opacity 0.3s, transform 0.3s;
    pointer-events: none;
    white-space: nowrap;
    z-index: 100;
  }

  .heart {
    position: absolute;
    color: #fff;
    font-size: 20px;
    animation: beat 1s infinite;
    user-select: none;
    opacity: 0.8;
    pointer-events: none;
  }

  @keyframes beat {
    0%,100%{ transform: scale(1); }
    50%{ transform: scale(1.5); }
  }

  @keyframes pulse {
    0% { transform: scale(1); box-shadow: 0 0 10px #ff4d6d; }
    50% { transform: scale(1.2); box-shadow: 0 0 20px #ff4d6d; }
    100% { transform: scale(1); box-shadow: 0 0 10px #ff4d6d; }
  }

  .pulse {
    animation: pulse 1s infinite;
  }

  @media (max-width: 500px) {
    h1 { font-size: 1.8rem; margin: 15px; }
    #button-container { 
        flex-direction: column; 
        gap: 15px; 
    }
    button { 
        width: 140px; 
        padding: 12px 20px; 
        font-size: 1.1rem; 
    }
  }
</style>
</head>
<body>

<h1>Stuti, will you be my Valentine? ğŸ’˜</h1>

<div id="button-container">
  <button id="yes">Yes ğŸ’–</button>
  <button id="no">No</button>
</div>

<div id="player"></div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player;

// YouTube player setup
function onYouTubeIframeAPIReady() {
  player = new YT.Player('player', {
    height: '0',
    width: '0',
    videoId: 'qdDVtFvJwUc',
    playerVars: {
      autoplay: 1,
      controls: 0,
      start: 47,
      end: 79,
      loop: 1,
      playlist: 'qdDVtFvJwUc',
      mute: 1,
      modestbranding: 1
    },
    events: {
      'onReady': (event) => {
        event.target.playVideo();
        // Segment loop 47s-79s
        setInterval(() => {
          if(player.getCurrentTime() >= 79){
            player.seekTo(47);
          }
        }, 500);
      }
    }
  });
}

// Unmute on first tap for mobile
document.addEventListener('click', () => {
  if(player && player.isMuted()){
    player.unMute();
  }
}, { once: true });

// Buttons
const yesBtn = document.getElementById("yes");
const noBtn = document.getElementById("no");

yesBtn.addEventListener("click", () => {
  alert("YAYYYY ğŸ’•\n\nStuti, you just made my day!\nYouâ€™re officially my Valentine ğŸ’–\n\nScreenshot this and send it!");
});

// No button messages
const messages = [
  "ğŸ’˜ Nopeâ€¦ not happening!",
  "ğŸ’• Still no! You canâ€™t escape me!",
  "ğŸ’– Are you trying? Cute, but NO!",
  "ğŸ’ Haha! Giving up is not an option! ğŸ’–",
  "â¤ï¸ One more clickâ€¦ and Iâ€™m gone! ğŸ˜±"
];

let clickCount = 0;
const maxClicks = 5;
let currentWidth = noBtn.offsetWidth;
let currentHeight = noBtn.offsetHeight;
let currentFont = parseFloat(window.getComputedStyle(noBtn).fontSize);

// Show toast depending on screen size
function showToast(message, targetBtn){
  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.innerText = message;

  const rect = targetBtn.getBoundingClientRect();

  if(window.innerWidth <= 500){
    // Mobile: show below the button
    toast.style.left = rect.left + 'px';
    toast.style.top = rect.bottom + 10 + 'px';
  } else {
    // Desktop: show to the right
    toast.style.left = rect.right + 10 + 'px';
    toast.style.top = rect.top + 'px';
  }

  document.body.appendChild(toast);

  setTimeout(() => {
    toast.style.opacity = 1;
    toast.style.transform = 'translateY(-10px)';
  }, 10);

  setTimeout(() => {
    toast.style.opacity = 0;
    toast.style.transform = 'translateY(-20px)';
    setTimeout(() => {
      toast.remove();
    }, 300);
  }, 2000);
}

// Shrink No button
function shrinkNoButton(){
  if(clickCount < maxClicks-1){
    // First 4 clicks: shrink + toast
    clickCount++;
    shrinkButton();
    showToast(messages[clickCount-1], noBtn);
  } else if(clickCount === maxClicks-1){
    // 5th click: show "one more click" message
    clickCount++;
    showToast(messages[clickCount-1], noBtn);
  } else {
    // 6th click: disappear
    noBtn.style.display = 'none';
    yesBtn.classList.add('pulse');
  }
}

function shrinkButton(){
  const shrinkFactor = 0.85;
  currentWidth *= shrinkFactor;
  currentHeight *= shrinkFactor;
  currentFont *= shrinkFactor;

  noBtn.style.width = currentWidth + 'px';
  noBtn.style.height = currentHeight + 'px';
  noBtn.style.fontSize = currentFont + 'px';
  noBtn.style.padding = (15 * Math.pow(shrinkFactor, clickCount)) + 'px ' + (30 * Math.pow(shrinkFactor, clickCount)) + 'px';
}

noBtn.addEventListener('click', shrinkNoButton);
noBtn.addEventListener('touchstart', shrinkNoButton);

// Beating hearts in background
function createHeart(){
  const heart = document.createElement('div');
  heart.className = 'heart';
  heart.innerHTML = 'ğŸ’–';
  heart.style.left = Math.random() * window.innerWidth + 'px';
  heart.style.top = Math.random() * window.innerHeight + 'px';
  heart.style.fontSize = (10 + Math.random()*30) + 'px';
  if(yesBtn.matches(':hover')) heart.style.transform = 'scale(2)';
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 1000);
}
setInterval(createHeart, 200);

// Extra hearts when hovering Yes
yesBtn.addEventListener('mouseenter', () => {
  for(let i=0;i<10;i++) setTimeout(createHeart, i*100);
});
</script>

</body>
</html>
